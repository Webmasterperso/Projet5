{% extends "templateinit.twig" %}

{% block title %}
Les peintures d'Anne Madamet
{% endblock %}

{% block head %}
{{ parent() }}
{% endblock %}

{% block content %}

    <h1>{{ a_variable }}</h1>


    <section id="slide">
        <div id="slide_right"><i class="fas fa-palette"></i></div>
        <div id="slide_left"><i <i class="fas fa-palette"></i></div>
        

        <section id="oeuvre">
        
            {% set firstoeuvre = 1 %}
            {% set numero = 1 %}
            {#% for cat in datacat %#}

            {% for oeuvre1 in data1 %}
                
                <figure id="diapo1" class="diapo">
                {% set firstoeuvre = oeuvre1.oeuvre_id %}
                    <div class="image">
                        <img src="{{ base }}/imagesoeuvres/{{oeuvre1.oeuvre_lien|e}}" alt="photo" id="pictures1" class="images" />
                    </div>
                    <div class="detailsoeuvre">
                        <ul>
                            <li>Oeuvre n° : {{ oeuvre1.oeuvre_id|e }}</li>
                            {% set nrcat = oeuvre1.categorie_id %}
                            {% for categorie in datacat %}
                                {% if categorie.categorie_id == nrcat %}
                                <li>Catégorie : {{ oeuvre1.categorie_id|e }} - {{categorie.categorie_nom}}</li>
                                {% endif %}                       
                            {% endfor %}

                            <li>titre : {{ oeuvre1.oeuvre_titre|e }}</li>
                            <li>description : {{ oeuvre1.oeuvre_description|e('html') }}</li>
                            <li>Prix : {{ oeuvre1.oeuvre_prix|e }} €</li>
                            {% if oeuvre1.oeuvre_statut == "vendu" %}
                            <li><img src="{{ base }}/images/vendu.png" alt="Vendu" id="logovendu" class="logovendu" /></li>
                            
                            {% else %}
                            <li class="iconeoeuvre">
                                    <i id="btputcaddie" class="fa-solid fa-cart-arrow-down" titre="Mettre dans mon panier" onclick="cart.pushcard({{ oeuvre1.oeuvre_id }})"></i>
                                
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </figure>
                 
            {% endfor %} 
            {#% endfor %#}

            {#% for cat in datacat %#}
            {% for oeuvre in data %}
                
                
                
                {% set numero = numero + 1 %}
                {% if oeuvre.oeuvre_id != firstoeuvre %}
                    <figure id="diapo{{ numero }}" class="diapo">  
                        <div class="image">
                            <img src="{{ base }}/imagesoeuvres/{{oeuvre.oeuvre_lien|e}}" alt="photo" id="pictures1" class="images" />
                        </div>
                        <div class="detailsoeuvre">
                            <ul>
                                <li>Oeuvre n° : {{ oeuvre.oeuvre_id|e }}</li>
                                {% set nrcat = oeuvre.categorie_id %}
                                {% for categorie in datacat%}
                                    {% if categorie.categorie_id == nrcat %}
                                    <li>Catégorie : {{ oeuvre.categorie_id|e }} - {{categorie.categorie_nom}}</li>
                                    {% endif %}                                              
                                {% endfor %}
                                <li>titre : {{ oeuvre.oeuvre_titre|e }}</li>
                                <li>description : {{ oeuvre.oeuvre_description|e }}</li>
                                <li>Prix : {{ oeuvre.oeuvre_prix|e }} €</li>
                                {% if oeuvre.oeuvre_statut == "vendu" %}
                                    <li><img src="{{ base }}/images/vendu.png" alt="Vendu" id="logovendu" class="logovendu" /></li>
                                {% else %}
                                <li class="iconeoeuvre">
                                    <i id="btputcaddie" class="fa-solid fa-cart-arrow-down" titre="Mettre dans mon panier" onclick="cart.pushcard({{ oeuvre.oeuvre_id }})"></i>
                                
                            </li>
                                {% endif %}
                            </ul>
                        </div>
                    </figure>
                {% else %}
                    {% set numero = numero - 1 %}
                {% endif %}
                 
            {% endfor %}
            {#% endfor %#} 
        </section>
         <div class="slide_jauge" id="jauge"></div>

    </section>
{% endblock %}

{% block javascript %}
<script>
    let currentJauge=1;
    let countOeuvre;
    function updateJauge(){
        let html="";
        //console.log("oeuvre " + currentJauge, "sur " + countOeuvre)
        for (let i=1; i<=countOeuvre; i++){
            html += `<i class="fa fa-circle${ currentJauge !== i ? "-o" : ""}" aria-hidden="true"></i>`
        }
        document.getElementById("jauge").innerHTML=html;
    }




    window.onload = function(){
        const oeuvres = document.getElementById("oeuvre");
        countOeuvre = oeuvres.querySelectorAll("figure").length;
        updateJauge();
    }
</script>
{% endblock %}